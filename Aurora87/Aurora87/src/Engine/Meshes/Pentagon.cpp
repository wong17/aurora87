#include "Pentagon.h"

namespace Engine
{
	std::shared_ptr<Mesh> Pentagon::GenerateMesh() const
	{
        std::vector<float> vertices = {
			// Posición                         // normales     // Coordenadas de textura
                  0.0f, 0.0f,       0.0f,      -0.0f, -1.0f,   -0.0f,        0.5f,      0.5f,
            -0.475528f, 0.0f, -0.154509f,      -0.0f, -1.0f,   -0.0f,   0.024472f, 0.654508f,
                  0.0f, 0.0f,      -0.5f,      -0.0f, -1.0f,   -0.0f,        0.5f,      1.0f,
                  0.0f, 0.0f,       0.0f,      -0.0f, -1.0f,   -0.0f,        0.5f,      0.5f,
            -0.293893f, 0.0f,  0.404509f,      -0.0f, -1.0f,   -0.0f,   0.206107f, 0.095491f,
            -0.475528f, 0.0f, -0.154509f,      -0.0f, -1.0f,   -0.0f,   0.024472f, 0.654508f,
                  0.0f, 0.0f,       0.0f,      -0.0f, -1.0f,   -0.0f,        0.5f,      0.5f,
             0.293893f, 0.0f,  0.404509f,      -0.0f, -1.0f,   -0.0f,   0.793893f, 0.095491f,
            -0.293893f, 0.0f,  0.404509f,      -0.0f, -1.0f,   -0.0f,   0.206107f, 0.095491f,
                  0.0f, 0.0f,       0.0f,      -0.0f, -1.0f,   -0.0f,        0.5f,      0.5f,
             0.475528f, 0.0f, -0.154509f,      -0.0f, -1.0f,   -0.0f,   0.975528f, 0.654508f,
             0.293893f, 0.0f,  0.404509f,      -0.0f, -1.0f,   -0.0f,   0.793893f, 0.095491f,
                  0.0f, 0.0f,       0.0f,      -0.0f, -1.0f,   -0.0f,        0.5f,      0.5f,
                  0.0f, 0.0f,      -0.5f,      -0.0f, -1.0f,   -0.0f,        0.5f,      1.0f,
             0.475528f, 0.0f, -0.154509f,      -0.0f, -1.0f,   -0.0f,   0.975528f, 0.654508f,
                  0.0f, 0.5f,       0.0f,      -0.0f,  1.0f,   -0.0f,        0.5f,      0.5f,
                  0.0f, 0.5f,      -0.5f,      -0.0f,  1.0f,   -0.0f,        0.5f,      1.0f,
            -0.475528f, 0.5f, -0.154509f,      -0.0f,  1.0f,   -0.0f,   0.024472f, 0.654508f,
                  0.0f, 0.5f,       0.0f,      -0.0f,  1.0f,   -0.0f,        0.5f,      0.5f,
            -0.475528f, 0.5f, -0.154509f,      -0.0f,  1.0f,   -0.0f,   0.024472f, 0.654508f,
            -0.293893f, 0.5f,  0.404509f,      -0.0f,  1.0f,   -0.0f,   0.206107f, 0.095491f,
                  0.0f, 0.5f,       0.0f,      -0.0f,  1.0f,   -0.0f,        0.5f,      0.5f,
            -0.293893f, 0.5f,  0.404509f,      -0.0f,  1.0f,   -0.0f,   0.206107f, 0.095491f,
             0.293893f, 0.5f,  0.404509f,      -0.0f,  1.0f,   -0.0f,   0.793893f, 0.095491f,
                  0.0f, 0.5f,       0.0f,      -0.0f,  1.0f,   -0.0f,        0.5f,      0.5f,
             0.293893f, 0.5f,  0.404509f,      -0.0f,  1.0f,   -0.0f,   0.793893f, 0.095491f,
             0.475528f, 0.5f, -0.154509f,      -0.0f,  1.0f,   -0.0f,   0.975528f, 0.654508f,
                  0.0f, 0.5f,       0.0f,      -0.0f,  1.0f,   -0.0f,        0.5f,      0.5f,
             0.475528f, 0.5f, -0.154509f,      -0.0f,  1.0f,   -0.0f,   0.975528f, 0.654508f,
                  0.0f, 0.5f,      -0.5f,      -0.0f,  1.0f,   -0.0f,        0.5f,      1.0f,
                  0.0f, 0.0f,      -0.5f,   -0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
            -0.475528f, 0.0f, -0.154509f,   -0.5878f, -0.0f, -0.809f,   0.024472f, 0.654508f,
            -0.475528f, 0.5f, -0.154509f,   -0.5878f, -0.0f, -0.809f,   0.024472f, 0.654508f,
                  0.0f, 0.0f,      -0.5f,   -0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
            -0.475528f, 0.5f, -0.154509f,   -0.5878f, -0.0f, -0.809f,   0.024472f, 0.654508f,
                  0.0f, 0.5f,      -0.5f,   -0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
             0.475528f, 0.0f, -0.154509f,    0.5878f, -0.0f, -0.809f,   0.975528f, 0.654508f,
                  0.0f, 0.0f,      -0.5f,    0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
                  0.0f, 0.5f,      -0.5f,    0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
             0.475528f, 0.0f, -0.154509f,    0.5878f, -0.0f, -0.809f,   0.975528f, 0.654508f,
                  0.0f, 0.5f,      -0.5f,    0.5878f, -0.0f, -0.809f,        0.5f,      1.0f,
             0.475528f, 0.5f, -0.154509f,    0.5878f, -0.0f, -0.809f,   0.975528f, 0.654508f,
             0.293893f, 0.0f,  0.404509f,    0.9511f, -0.0f,  0.309f,   0.793893f, 0.095491f,
             0.475528f, 0.0f, -0.154509f,    0.9511f, -0.0f,  0.309f,   0.975528f, 0.654508f,
             0.475528f, 0.5f, -0.154509f,    0.9511f, -0.0f,  0.309f,   0.975528f, 0.654508f,
             0.293893f, 0.0f,  0.404509f,    0.9511f, -0.0f,  0.309f,   0.793893f, 0.095491f,
             0.475528f, 0.5f, -0.154509f,    0.9511f, -0.0f,  0.309f,   0.975528f, 0.654508f,
             0.293893f, 0.5f,  0.404509f,    0.9511f, -0.0f,  0.309f,   0.793893f, 0.095491f,
            -0.293893f, 0.0f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.206107f, 0.095491f,
             0.293893f, 0.0f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.793893f, 0.095491f,
             0.293893f, 0.5f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.793893f, 0.095491f,
            -0.293893f, 0.0f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.206107f, 0.095491f,
             0.293893f, 0.5f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.793893f, 0.095491f,
            -0.293893f, 0.5f,  0.404509f,      -0.0f, -0.0f,    1.0f,   0.206107f, 0.095491f,
            -0.475528f, 0.0f, -0.154509f,   -0.9511f, -0.0f,  0.309f,   0.024472f, 0.654508f,
            -0.293893f, 0.0f,  0.404509f,   -0.9511f, -0.0f,  0.309f,   0.206107f, 0.095491f,
            -0.293893f, 0.5f,  0.404509f,   -0.9511f, -0.0f,  0.309f,   0.206107f, 0.095491f,
            -0.475528f, 0.0f, -0.154509f,   -0.9511f, -0.0f,  0.309f,   0.024472f, 0.654508f,
            -0.293893f, 0.5f,  0.404509f,   -0.9511f, -0.0f,  0.309f,   0.206107f, 0.095491f,
            -0.475528f, 0.5f, -0.154509f,   -0.9511f, -0.0f,  0.309f,   0.024472f, 0.654508f
        };

		for (size_t i = 0; i < vertices.size(); i += 8) {
			vertices[i + 0] *= m_Size.x; // x
			vertices[i + 1] *= m_Size.y; // y
			vertices[i + 2] *= m_Size.z; // z
		}

        std::vector<TextureData> textures;
        auto material = MaterialTextureType::Diffuse;
        if (m_Texture)
        {
            textures.push_back({
                material,
                m_Texture,
                MaterialTextureUniformName(material),
                0,
                m_Texture->GetSpecification().SRGB });
        }
        else if (!m_TexturePath.empty())
        {
            TextureSpecification spec;
            spec.SRGB = true;

            if (auto tex = TextureManager::Get().Load(m_TexturePath, spec))
                textures.push_back({ material, tex, MaterialTextureUniformName(material), 0, spec.SRGB });
            else
                std::cerr << "Pentagon::GenerateMesh(): Error al cargar la textura " << m_TexturePath << "\n";
        }

		return std::make_shared<Mesh>(vertices, textures);
	}
}